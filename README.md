<p align="center">
    <img src=".github/logo.png" title="Logo do projeto"><br />
    <img src="https://img.shields.io/maintenance/yes/2022?style=for-the-badge" title="Status do projeto">
    <img src="https://img.shields.io/github/workflow/status/ccuffs/uffs-ca-scraping/ci.uffs.cc?label=Build&logo=github&logoColor=white&style=for-the-badge" title="Build status">
</p>

# uffs-ca-scraping

Um pacote PHP para raspagem dos calend√°rios acad√™micos da [Universidade Federal da Fronteira Sul](https://www.uffs.edu.br). A ideia desse pacote √© permitir que APIs sejam criadas com informa√ß√µes sobre datas importantes para a comunidade acad√™mica, como rematr√≠cula, fechamento de di√°rio, etc.

## ‚ú®Features

* Obten√ß√£o autom√°tica de informa√ß√µes dos calend√°rios acad√™micos atrav√©s da [listagem no site da UFFS](https://www.uffs.edu.br/institucional/pro-reitorias/graduacao/calendario-academico);
* Obtem um (ou todos) os calend√°rios acad√™micos publicados no site;
* N√£o necessita de altera√ß√µes para obter calend√°rios futuros (que ainda ser√£o publicados pela UFFS);
* Dados estruturados para facilitar a manipula√ß√£o.

## üöÄ Utiliza√ß√£o

### 1. Adicione o pacote ao seu projeto

Na pasta raiz do seu projeto PHP, rode:

```
composer require ccuffs/uffs-ca-scraping
```

Todas as depend√™ncias ser√£o instaladas.

### 2. Obten√ß√£o de todos os calend√°rios acad√™micos

Para obtem qualquer calend√°rio acad√™mico, voc√™ utilizar√° a classe `AcademicCalendarUFFS`. Um objeto dessa classe possui diversos m√©todos para obten√ß√£o de calend√°rios.

O mais simples √© a obten√ß√£o de todos os calend√°rios j√° publicados:

```php
$ac = new \CCUFFS\Scrap\AcademicCalendarUFFS();
$calendars = $ac->fetchCalendars();
```

Nesse caso, `$calendars` ser√° um vetor onde cada entrada √© um calend√°rio acad√™mico (com informa√ß√£o do t√≠tulo dele, a URL onde ele foi obtido e os dados/datas referentes):

```php
array(3) {
    [0]=>
    array(3) {
      ["title"]=>
      string(193) "PORTARIA N 2042/GR/UFFS/2022 - Estabelece o ... para o ano letivo de 2022. "
      ["url"]=>
      string(61) "https://www.uffs.edu.br/atos-normativos/portaria/gr/2022-2042"
      ["data"]=>
      array(11) {
        ["ABRIL / 2022"]=> array(3) {
            ["month"]=>
            string(5) "Abril"
            ["events"]=>
            array(13) {
              [0]=>
              array(2) {
                ["period"]=>
                string(1) "8"
                ["event"]=>
                string(176) "Publica√ß√£o dos editais com os resultados ..."
              }
              [1]=>
              array(2) {
                ["period"]=>
                string(7) "11 a 18"
                ["event"]=>
                string(195) "Per√≠odo para matr√≠cula dos selecionados ..."
              }
              ...
            }
        ["MAIO / 2022"]=> ...
        ["JUNHO / 2022"]=> ...
        ...
      }
    [1]=> 
    array(3) {
      ["title"]=>
      string(193) "PORTARIA N 1090/GR/UFFS/2021 - Estabelece o ... para o ano letivo de 2021."
      ["url"]=>
      string(61) "https://www.uffs.edu.br/atos-normativos/portaria/gr/2021-1090"
      ["data"]=>
      array(11) {
        ["JANEIRO / 2021"]=> ...
        ["FEVEREIRO / 2021"]=> ...
        ["MAR√áO / 2021"]=> ...
        ...
      }
``` 

Esse m√©todo tende a retornar valores diferentes conforme os meses passem. Por exemplo, se a UFFS publicar um novo calend√°rio acad√™mico, uma nova entrada ser√° retornada no vetor em quest√£o.

### 3. Obten√ß√£o de um calend√°rio acad√™mico espec√≠fico

Se voc√™ deseja obter um calend√°rio acad√™mico em espec√≠fico, voc√™ pode usar a URL dele no site da UFFS para obter os dados:

```php
$ac = new \CCUFFS\Scrap\AcademicCalendarUFFS();
$calendar = $ac->fetchCalendarByUrl('https://www.uffs.edu.br/atos-normativos/portaria/gr/2022-2042');
```

A vari√°vel `$calendar` conter√° os dados do calend√°rio acad√™mico em quest√£o (o equivalente ao campo `data` de um calend√°rio obtido com `fetchCalendars()`). Os √≠ndices s√£o associativos e represetam o m√™s e ano do calend√°rio. Por exemplo:

```php
array(11) {
    ["ABRIL / 2022"]=>
    array(3) {
      ["month"]=>
      string(5) "Abril"
      ["events"]=>
      array(13) {
        [0]=>
        array(2) {
          ["period"]=>
          string(1) "8"
          ["event"]=>
          string(176) "Publica√ß√£o dos editais com os resultados de Transfer√™ncia Interna e Retorno de Aluno-abandono da UFFS, Transfer√™ncia Externa e Retorno de Graduado, para ingresso em 2022.1."
        }
        [1]=>
        array(2) {
          ["period"]=>
          string(7) "11 a 18"
          ["event"]=>
          string(195) "Per√≠odo para matr√≠cula dos selecionados no Processo Seletivo de Transfer√™ncia Interna e Retorno de Aluno-abandono da UFFS, Transfer√™ncia Externa e Retorno de Graduado, para ingresso em 2022.1"
        }
        [2]=>
        array(2) {
          ["period"]=>
          string(2) "14"
          ["event"]=>
          string(50) "T√âRMINO DO SEMESTRE LETIVO 2021.2 DA GRADUA√á√ÉO."
        }
        [3]=>
        array(2) {
          ["period"]=>
          string(7) "15 a 30"
          ["event"]=>
          string(31) "Per√≠odo de recesso acad√™mico."
        }
        [4]=>
        array(2) {
          ["period"]=>
          string(2) "18"
          ["event"]=>
          string(110) "Data limite para encerramento dos Di√°rios de Classe on-line e entrega dos mesmos nas Secretarias Acad√™micas."
        }
        [5]=>
        array(2) {
          ["period"]=>
          string(10) "19/4 a 2/5"
          ["event"]=>
          string(132) "Per√≠odo para destrancamento ou renova√ß√£o de trancamento de matr√≠cula da gradua√ß√£o para o semestre 2022.1, via Portal do Aluno."
        }
        [6]=>
        array(2) {
          ["period"]=>
          string(10) "19/4 a 2/5"
          ["event"]=>
          string(86) "Per√≠odo de autoavalia√ß√£o geral dos estudantes, TAEs, docentes e comunidade externa."
        }
        [7]=>
        array(2) {
          ["period"]=>
          string(11) "19/4 a 31/5"
          ["event"]=>
          string(84) "Per√≠odo de preenchimento e aprova√ß√£o do plano de ensino, via Portal do Professor."
        }
        [8]=>
        array(2) {
          ["period"]=>
          string(11) "19/4 a 31/5"
          ["event"]=>
          string(117) "Per√≠odo para elabora√ß√£o e entrega do Plano de Adapta√ß√µes Curriculares ao estudante e ao Setor de Acessibilidade."
        }
        [9]=>
        array(2) {
          ["period"]=>
          string(7) "19 a 24"
          ["event"]=>
          string(70) "Per√≠odo para rematr√≠cula 2022.1 da gradua√ß√£o, via Portal do Aluno."
        }
        [10]=>
        array(2) {
          ["period"]=>
          string(7) "25 e 26"
          ["event"]=>
          string(66) "Per√≠odo para an√°lise dos pedidos de rematr√≠cula da gradua√ß√£o."
        }
        [11]=>
        array(2) {
          ["period"]=>
          string(7) "25 a 29"
          ["event"]=>
          string(54) "Per√≠odo de planejamento do ano letivo da gradua√ß√£o."
        }
        [12]=>
        array(2) {
          ["period"]=>
          string(10) "27/4 a 2/5"
          ["event"]=>
          string(96) "Per√≠odo para solicita√ß√£o de ajustes de matr√≠cula 2022.1 da gradua√ß√£o, via Portal do Aluno."
        }
      }
      ["festivities"]=>
      array(2) {
        [0]=>
        string(46) "15 - Paix√£o de Cristo - Feriado Nacional."
        [1]=>
        string(39) "21 - Tiradentes - Feriado Nacional."
      }
    }
    ["MAIO / 2022"]=>
    array(3) {
      ["month"]=>
      string(4) "Maio"
      ["events"]=>
      array(14) {
        [0]=>
        array(2) {
          ["period"]=>
          string(10) "19/4 a 2/5"
          ["event"]=>
          string(132) "Per√≠odo para destrancamento ou renova√ß√£o de trancamento de matr√≠cula da gradua√ß√£o para o semestre 2022.1, via Portal do Aluno."
        }
        [1]=>
        array(2) {
          ["period"]=>
          string(10) "19/4 a 2/5"
          ["event"]=>
          string(86) "Per√≠odo de autoavalia√ß√£o geral dos estudantes, TAEs, docentes e comunidade externa."
        }
        [2]=>
        array(2) {
          ["period"]=>
          string(11) "19/4 a 31/5"
          ["event"]=>
          string(84) "Per√≠odo de preenchimento e aprova√ß√£o do plano de ensino, via Portal do Professor."
        }
        [3]=>
        array(2) {
          ["period"]=>
          string(11) "19/4 a 31/5"
          ["event"]=>
          string(117) "Per√≠odo para elabora√ß√£o e entrega do Plano de Adapta√ß√µes Curriculares ao estudante e ao Setor de Acessibilidade."
        }
        [4]=>
        array(2) {
          ["period"]=>
          string(10) "27/4 a 2/5"
          ["event"]=>
          string(96) "Per√≠odo para solicita√ß√£o de ajustes de matr√≠cula 2022.1 da gradua√ß√£o, via Portal do Aluno."
        }
        [5]=>
        array(2) {
          ["period"]=>
          string(1) "2"
          ["event"]=>
          string(60) "IN√çCIO DO SEMESTRE LETIVO 2022/1 DOS CURSOS DE GRADUA√á√ÉO."
        }
        [6]=>
        array(2) {
          ["period"]=>
          string(5) "3 e 4"
          ["event"]=>
          string(75) "Per√≠odo para an√°lise dos pedidos de ajustes de matr√≠cula da gradua√ß√£o."
        }
        [7]=>
        array(2) {
          ["period"]=>
          string(6) "5 a 15"
          ["event"]=>
          string(68) "Per√≠odo para inclus√£o extraordin√°ria de CCR, via Portal do Aluno."
        }
        [8]=>
        array(2) {
          ["period"]=>
          string(6) "5 a 31"
          ["event"]=>
          string(88) "Per√≠odo para solicita√ß√£o de cancelamento de CCRs da gradua√ß√£o, via Portal do Aluno."
        }
        [9]=>
        array(2) {
          ["period"]=>
          string(1) "9"
          ["event"]=>
          string(181) "Data de publica√ß√£o do edital do processo seletivo de Aluno-especial da gradua√ß√£o, se houver viabilidade de realiza√ß√£o das inscri√ß√µes devido aos efeitos da Pandemia Covid-19."
        }
        [10]=>
        array(2) {
          ["period"]=>
          string(7) "10 e 11"
          ["event"]=>
          string(87) "Per√≠odo para inscri√ß√£o no processo seletivo de Aluno-especial da gradua√ß√£o 2022/1."
        }
        [11]=>
        array(2) {
          ["period"]=>
          string(2) "17"
          ["event"]=>
          string(65) "Divulga√ß√£o do resultado do processo seletivo de Aluno-especial."
        }
        [12]=>
        array(2) {
          ["period"]=>
          string(13) "18/05 a 02/07"
          ["event"]=>
          string(65) "Per√≠odo para realiza√ß√£o das formaturas dos concluintes 2021.2."
        }
        [13]=>
        array(2) {
          ["period"]=>
          string(7) "23 a 31"
          ["event"]=>
          string(78) "Per√≠odo para solicita√ß√£o de exame de sufici√™ncia na Secretaria Acad√™mica."
        }
      }
      ["festivities"]=>
      array(1) {
        [0]=>
        string(51) "1 - Dia Mundial do Trabalho - Feriado Nacional."
      }
    }
}
```

## üë©‚Äçüíª Desenvolvimento

Se voc√™ pretende criar features novas, corrigir bugs ou afins, siga o passo a passo abaixo.

Clone o reposit√≥rio:

```
git clone https://github.com/ccuffs/uffs-ca-scraping && cd uffs-ca-scraping
```

Instale as depend√™ncias:

```
composer install
```

Implemente o que for necess√°rio e rode os testes:

```
composer test
```

Em teoria todos os testes devem passar. Se algo existente estiver quebrando, muito provavelmente a UFFS atualizou o site e voc√™ precisar√° atualizar o pacote. Que fase, n√©?

## ü§ù Contribua

Sua ajuda √© muito bem-vinda, independente da forma! Confira o arquivo [CONTRIBUTING.md](CONTRIBUTING.md) para conhecer todas as formas de contribuir com o projeto. Por exemplo, [sugerir uma nova funcionalidade](https://github.com/ccuffs/uffs-ca-scraping/issues/new?assignees=&labels=&template=feature_request.md&title=), [reportar um problema/bug](https://github.com/ccuffs/uffs-ca-scraping/issues/new?assignees=&labels=bug&template=bug_report.md&title=), [enviar um pull request](https://github.com/ccuffs/hacktoberfest/blob/master/docs/tutorial-pull-request.md), ou simplemente utilizar o projeto e comentar sua experi√™ncia.


## üé´ Licen√ßa

Esse projeto √© licenciado nos termos da licen√ßa open-source [MIT](https://choosealicense.com/licenses/mit) e est√° dispon√≠vel de gra√ßa.

## üß¨ Changelog

Veja todas as altera√ß√µes desse projeto no arquivo [CHANGELOG.md](CHANGELOG.md).

## üß™ Projetos semelhates

Abaixo est√° uma lista de links interessantes e projetos similares:

* [uffs-sga-scraping](https://github.com/ccuffs/uffs-sga-scraping)
* [auth-iduffs](https://github.com/ccuffs/auth-iduffs)
* [dados-uffs](https://github.com/grintex/dados-uffs)
